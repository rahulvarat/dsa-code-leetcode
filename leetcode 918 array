class Solution {
public:
    int maxSubarraySumCircular(vector<int>& arr) {
        int minending = arr[0];
        int maxending = arr[0];
        int result = arr[0];      // max subarray
        int result2 = arr[0];     // min subarray
        int total = arr[0];
        int result3;

        for(int i = 1; i < arr.size(); i++){
            total = total + arr[i];

            int v1 = arr[i];
            int v2 = maxending + arr[i];
            int v3 = minending + arr[i];

            maxending = max(v1, v2);

            minending = min(v1, v3);       

            result = max(result, maxending);
            result2 = min(result2, minending);
        }

        
        if(result < 0) return result;

        int circular = total - result2;
        result3 = max(result, circular);
        
        return result3;
    }
};
